#!/usr/bin/env python

import sys

def transform(file: str):

    if len(file) == 0:
        return
    
    with open(file, "r") as f:
        contents = f.read()
    
    if contents.find(sys.argv[1]) == -1:
        return
    
    replaced = contents.replace(sys.argv[1], sys.argv[2])
    with open(file, "w") as f:
        f.write(replaced)
    
def main():

    if len(sys.argv) != 3:
        print("Usage: replace [from] [to] < [files]")
        sys.exit(1)

    for file in sys.stdin:
        transform(file[:-1])

if __name__ == "__main__":
    main()
